
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "gallery_basic_use_cases/Dataset/3_segment_resample_dataset.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_gallery_basic_use_cases_Dataset_3_segment_resample_dataset.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_basic_use_cases_Dataset_3_segment_resample_dataset.py:


==============================================
Segment and resample a dataset
==============================================

This code will show you how to segment and resample your original audio dataset into an analysis dataset.

.. GENERATED FROM PYTHON SOURCE LINES 10-18

.. code-block:: default


    # sphinx_gallery_thumbnail_path = '_static/thumbnail_segment_resample.png'



    from pathlib import Path
    from OSmOSE import Spectrogram








.. GENERATED FROM PYTHON SOURCE LINES 19-20

Define dataset path and name

.. GENERATED FROM PYTHON SOURCE LINES 20-28

.. code-block:: default

    path_osmose_dataset = "/home6/cazaudo/Bureau/osmose_sample_datasets/"
    dataset_name = "SPM"
    campaign_name = ""

    dataset = Spectrogram(dataset_path = Path(path_osmose_dataset, campaign_name, dataset_name))

    print(dataset)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    No valid processed/adjust_metadata.csv found and no parameters provided. All attributes will be initialized to default values..  

    Metadata of SPM :
    - audio_file_origin_duration : 2700 (s) 
    - origin_sr : 32768 (Hz) 
    - start_date : 2010-08-19T17:00:00.000000-0300  
    - end_date : 2010-08-19T21:00:00.000000-0300  
    - audio_file_count : 5  
    - audio_file_origin_volume : 177.0 (MB) 
    - dataset_origin_volume : 1 (GB) 





.. GENERATED FROM PYTHON SOURCE LINES 29-30

The two following parameters `spectro_duration` (in s) and `dataset_sr` (in Hz) will allow you to process your data using different file durations (ie segmentation) and/or sampling rate (ie resampling) parameters. `spectro_duration` is the maximal duration of the spectrogram display window. To process audio files from your original folder (ie without any segmentation and/or resampling operations), use the original audio file duration and sample rate parameters estimated at your dataset uploading (they are printed in the previous cell). 

.. GENERATED FROM PYTHON SOURCE LINES 30-33

.. code-block:: default

    dataset.dataset_sr = 32000
    dataset.spectro_duration = 60








.. GENERATED FROM PYTHON SOURCE LINES 34-35

In case of audio segmentation, you can use the following variable `audio_file_overlap` (in seconds, default value = 0) to set an overlap in seconds between two consecutive segments.

.. GENERATED FROM PYTHON SOURCE LINES 35-37

.. code-block:: default

    dataset.audio_file_overlap = 0 # seconds








.. GENERATED FROM PYTHON SOURCE LINES 38-39

The method :meth:`OSmOSE.Spectrogram.Spectrogram.initialize` allows you to segment and resample your original audio files based on `spectrogram.dataset_sr` and `spectrogram.spectro_duration`. This method will create another folder of audio files named `{spectro_duration}_{dataset_sr}`.

.. GENERATED FROM PYTHON SOURCE LINES 39-41

.. code-block:: default

    dataset.initialize()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Automatically reshaping audio files to fit the spectro duration value. Files will be 60 seconds long.
    read and remove file /home6/cazaudo/Bureau/osmose_sample_datasets/SPM/data/audio/60_32000/timestamp_0.csv
    read and remove file /home6/cazaudo/Bureau/osmose_sample_datasets/SPM/data/audio/60_32000/timestamp_4.csv
    read and remove file /home6/cazaudo/Bureau/osmose_sample_datasets/SPM/data/audio/60_32000/timestamp_2.csv
    save file /home6/cazaudo/Bureau/osmose_sample_datasets/SPM/data/audio/60_32000/timestamp.csv





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 18.437 seconds)


.. _sphx_glr_download_gallery_basic_use_cases_Dataset_3_segment_resample_dataset.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: 3_segment_resample_dataset.py <3_segment_resample_dataset.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: 3_segment_resample_dataset.ipynb <3_segment_resample_dataset.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
